<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="shortcut icon" href="/images/weblogo.webp" type="image/x-icon">
	<link href='https://unpkg.com/boxicons@2.0.9/css/boxicons.min.css' rel='stylesheet'>
	<link rel="stylesheet" href="/stylesheets/dashboard.css">
	<link rel="stylesheet" href="/stylesheets/product.css">
	<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">

	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
		crossorigin="anonymous"></script>
	<link href="https://fonts.googleapis.com/css2?family=Noto+Sans&display=swap" rel="stylesheet">

	<title>AdminHub</title>
	<style>
		input {
			border: 1px solid black !important;
		}
	</style>
</head>

<body>
	<%- include('../webview/modal_pop') %>
		<div class="price_overlay"></div>
		<section id="content">
			<nav>
				<i class='bx bx-menu'></i>
				<a href="/admin/dashboard" class="nav-link">Admin</a>
				<form action="#" style="display: none;">
					<div class="form-input">
						<input type="search" placeholder="Search...">
						<button type="submit" class="search-btn"><i class='bx bx-search'></i></button>
					</div>
				</form>
				<input type="checkbox" id="switch-mode" hidden>
				<a href="/admin/dashboard" class="profile">
					<img src="/images/cableguy.png" loading="lazy" style="object-fit: contain;"> </a>

			</nav>
			<section id="sidebar">
				<a href="/admin/dashboard" class="brand">
					<i class='bx bxs-shopping-bag'></i>
					<span class="text">Admin</span>
				</a>
				<ul class="side-menu top">
					<li>
						<a href="<%= (url_pathname) %>admin/dashboard">
							<i class='bx bxs-dashboard'></i>
							<span class="text">Dashboard</span>
						</a>
					</li>
					<li>
						<a href="<%= (url_pathname) %>admin/category">
							<i class='bx  bx-category'></i>
							<span class="text">Category</span>
						</a>
					</li>
					<li>
						<a href="<%= (url_pathname) %>admin/brand">
							<i class='bx  bx-category'></i>
							<span class="text">Brand</span>
						</a>
					</li>
					<li>
						<a href="<%= (url_pathname) %>admin/flavour">
							<i class='bx  bx-category'></i>
							<span class="text">Flavour</span>
						</a>
					</li>
					<li class="active">
						<a href="<%= (url_pathname) %>admin/products">
							<i class='bx bx-package'></i>
							<span class="text">Products</span>
						</a>
					</li>
					<li>
						<a href="<%= (url_pathname) %>admin/deletedproducts">
							<i class='bx bxs-trash'></i>
							<span class="text">Deleted Products</span>
						</a>
					</li>

					<li>
						<a href="<%= (url_pathname) %>admin/blogs">
							<i class='bx bxs-pencil'></i>
							<span class="text">Blogs</span>
						</a>
					</li>

					<li>
						<a href="<%= (url_pathname) %>admin/banner">
							<i class='bx bxs-megaphone'></i>
							<span class="text">Banner</span>
						</a>
					</li>
					<li>
						<a href="<%= (url_pathname) %>admin/order_details">
							<i class='bx bxs-shopping-bag-alt'></i>
							<span class="text">Order Details</span>
						</a>
					</li>
					<li>
						<a href="<%= (url_pathname) %>admin/customers">
							<i class='bx bxs-user-check'></i>
							<span class="text">Customers</span>
						</a>
					</li>
					<li>
						<a href="<%= (url_pathname) %>admin/customerservice">
							<i class='bx bx-user-voice'></i>
							<span class="text">Customer Service</span>
						</a>
					</li>
					<li>
						<a href="<%= (url_pathname) %>admin/customerreview">
							<i class='bx bx-comment-dots'></i>
							<span class="text">Customer Review</span>
						</a>
					</li>
				</ul>
				<ul class="side-menu logout">
					<li>
						<a href="/admin/login" class="logout" id="logoutButton">
							<i class='bx bxs-log-out-circle'></i>
							<span class="text">Logout</span>
						</a>
					</li>

				</ul>
			</section>

			<main>
				<div class="price_overlays"></div>
				<div id="deleteConfirm"
					style="display: none;z-index: 10000;position: fixed;top: 50%;left: 50%;transform: translate(-50%, -50%);">
					<div class="modals-content">
						<p>Are you sure you want to delete this product?</p>
						<button id="confirmBtn" class="btn" style="background-color: #dc3545;">Confirm</button>
						<button id="cancelBtn" class="btn btn-secondary">Cancel</button>
					</div>
				</div>
				<div class="head-title">
					<div class="left">
						<h1>Product</h1>
						<ul class="breadcrumb"></ul>
					</div>
					<div class="mb-3 sm-main">
						<input type="date" id="startDate" class="form-control d-inline"
							style="width: auto; display: inline-block;" />
						<input type="date" id="endDate" class="form-control d-inline"
							style="width: auto; display: inline-block;" />
						<button id="filterButton" class="btn btn-primary">Filter Products</button>
					</div>
				</div>

				<div class="table-data">
					<div class="order">
						<div class="head">
							<h3>Products</h3>
							<form action="#">
								<div class="form-input search">
									<input type="search" id="searchInput" placeholder="Search...">
								</div>
							</form>
							<button type="button" class="btn btn-primary" data-bs-toggle="modal"
								data-bs-target="#exampleModal" onclick="setProducts()">
								Add New Product
							</button>
							<button type="button" class="btn btn-primary" data-bs-toggle="modal"
								data-bs-target="#stockModal" onclick="addStock()">
								Update Stock
							</button>

							<div class="modal fade modal-lg" id="stockModal" tabindex="-1"
								aria-labelledby="exampleModalLabel" aria-hidden="true">
								<div class="modal-dialog">
									<div class="modal-content">
										<div class="modal-header">
											<h1 class="modal-title fs-5" id="exampleModalLabel">Update Product Stock
											</h1>
											<button type="button" class="btn-close stock-closes" data-bs-dismiss="modal"
												aria-label="Close"></button>
										</div>
										<div class="modal-body">
											<div class="container my-5">
												<div class="row justify-content-center">
													<div class="col-lg-10">
														<form id="stock-form">
															<div class="row g-3">
																<select name="update_select" id="update_select">
																	<option value="">Select a Product</option>
																</select>
																<select name="batch_stock" id="batch_stock"
																	style="display: none;">
																	<option value="">Select a batch</option>
																</select>
																<p class="current_stock" style="display: none;"></p>
																<p class="current_batch_stock"
																	style="display: none;font-weight: bold;"></p>

																<div class="col-lg-12 col-md-12 col-sm-12"
																	id="manage-stock" style="display: none;">
																	<div id="transaction-type-container">
																		<label>
																			<input type="radio" id="credit"
																				name="operation" style="width: 1rem;"
																				value="credit"
																				onchange="handleOperationChange()">
																			Add
																		</label>
																		<label>
																			<input type="radio" id="debit"
																				name="operation" style="width: 1rem;"
																				value="debit"
																				onchange="handleOperationChange()">
																			Remove
																		</label>
																	</div>
																</div>
																<div class="col-lg-6 col-md-12 col-sm-12"
																	id="amount-input-container" style="display: none;">
																	<label for="transaction-amount">Change
																		Quantity:</label>
																	<input type="number" id="amount"
																		class="form-control"
																		placeholder="Enter quantity" name="amount"
																		min="0" step="0.01" required>
																</div>
																<p class="total_stock"
																	style="display: none;font-weight: bold;"></p>
																<p class="total_batch_stock"
																	style="display: none;font-weight: bold;"></p>
																<div class="col-lg-12 col-md-12 col-sm-12">
																	<button type="submit"
																		class="btn btn-dark w-100 fw-bold"
																		id="product-add">Update Stock</button>
																</div>
															</div>
														</form>
													</div>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
							<div class="modal fade modal-lg" id="exampleModal" tabindex="-1"
								aria-labelledby="exampleModalLabel" aria-hidden="true">
								<div class="modal-dialog">
									<div class="modal-content">
										<div class="modal-header">
											<h1 class="modal-title fs-5 add-product-header" id="exampleModalLabel">Add
												Product</h1>
											<button type="button" class="btn-close product-closes"
												data-bs-dismiss="modal" aria-label="Close"></button>
										</div>
										<div class="modal-body">
											<div class="container my-5">
												<div class="row justify-content-center">
													<div class="col-lg-10">
														<form id="product-form">
															<div class="row g-3">
																<div class="col-lg-6 col-md-12 col-sm-12">
																	<label for="product-name" class="form-label">Product
																		name</label>
																	<input type="text" class="form-control"
																		id="product-name" name="product_name" required>
																</div>
																<div class="col-lg-6 col-md-12 col-sm-12">
																	<label for="product-description"
																		class="form-label">Product description</label>
																	<input type="text" class="form-control"
																		id="product-description"
																		name="product_description">
																</div>
																<input type="hidden" id="product-id" name="product_id">
																<br />
																<div class="col-lg-12 col-md-12 col-sm-12">
																	<select name="category_id" id="category_id"
																		class="category_select" required>
																		<option value="">Select a category</option>
																	</select>
																</div>

																<div class="col-lg-12 col-md-12 col-sm-12">
																	<select name="brand_id" id="brand_id"
																		class="brand_select">
																		<option value="">Select a Brand</option>
																	</select>
																</div>

																<div class="col-lg-6 col-md-12 col-sm-12"
																	style="display: none;">
																	<label for="product-featured"
																		class="form-label">Featured</label>
																	<input style="border: 1px solid black;"
																		type="checkbox" class="form-check-input"
																		id="product-featured" name="featured">
																</div>
																<div class="col-lg-12 col-md-12 col-sm-12">
																	<label for="health_benefits"
																		class="form-label">Health benefits</label>
																	<input type="text" class="form-control"
																		id="health-benefits" name="health_benefits">
																</div>
																<div class="col-lg-12 col-md-12 col-sm-12">
																	<label for="health_benefits" class="form-label">SEO
																		keywords</label>
																	<input type="text" class="form-control"
																		id="seo-tags" name="seo">
																</div>
																<div class="col-lg-12 col-md-12 col-sm-12">
																	<div id="image-container">
																		<h6 class="text-dark fw-bold">Image One(Main
																			Image)</h6>
																		<img src="" alt="Product Image"
																			id="product-image-preview"
																			style="width: 100px; height: 100px; cursor: pointer; display: none;"
																			loading="lazy" />
																		<button id="upload-button" type="button"
																			style="display: none; margin-top: 10px;background-color: #f16179;border-radius: 5px;"
																			onclick="document.getElementById('product-image-upload').click();">
																			Upload new image
																		</button>
																	</div>

																	<input type="file" name="product_image"
																		id="product-image-upload"
																		accept=".png, .jpg, .jpeg,.webp"
																		style="display: none;"
																		onchange="previewImage(event)" />

																	<button id="cancel-upload" type="button"
																		style="display: none; margin-top: 10px;background-color: #f16179;border-radius: 5px;"
																		onclick="cancelUpload()">
																		Cancel
																	</button>
																</div>
																<div class="col-lg-12 col-md-12 col-sm-12">
																	<div id="image-container">
																		<h6 class="text-dark fw-bold">Image Two(Hover
																			Image)</h6>
																		<img src="" alt="Product Image"
																			id="product-image-preview-two"
																			style="width: 100px; height: 100px; cursor: pointer; display: none;"
																			loading="lazy" />
																		<button id="upload-button-two" type="button"
																			style="display: none; margin-top: 10px;background-color: #f16179;border-radius: 5px;"
																			onclick="document.getElementById('product-image-upload-two').click();">
																			Upload new image
																		</button>
																	</div>

																	<input type="file" name="product_image_two"
																		id="product-image-upload-two"
																		accept=".png, .jpg, .jpeg,.webp"
																		style="display: none;"
																		onchange="previewImage(event)" />

																	<button id="cancel-upload-two" type="button"
																		style="display: none; margin-top: 10px;background-color: #f16179;border-radius: 5px;"
																		onclick="cancelUpload()">
																		Cancel
																	</button>
																</div>
																<div class="col-lg-12 col-md-12 col-sm-12">
																	<div id="image-container">
																		<h6 class="text-dark fw-bold">Image Three(Read
																			More Image)</h6>
																		<img src="" alt="Product Image"
																			id="product-image-preview-three"
																			style="width: 100px; height: 100px; cursor: pointer; display: none;"
																			loading="lazy" />
																		<button id="upload-button-three" type="button"
																			style="display: none; margin-top: 10px;background-color: #f16179;border-radius: 5px;"
																			onclick="document.getElementById('product-image-upload-three').click();">
																			Upload new image
																		</button>
																	</div>

																	<input type="file" name="product_image_three"
																		id="product-image-upload-three"
																		accept=".png, .jpg, .jpeg,.webp"
																		style="display: none;"
																		onchange="previewImage(event)" />

																	<button id="cancel-upload-three" type="button"
																		style="display: none; margin-top: 10px;background-color: #f16179;border-radius: 5px;"
																		onclick="cancelUpload()">
																		Cancel
																	</button>
																</div>
																<div class="col-lg-6 col-md-12 col-sm-12">
																	<select name="type" id="product_type" required
																		class="product_type">
																		<option value="">Select type</option>
																	</select>
																</div>

																<!-- <div class="col-lg-12 col-md-12 col-sm-12"
																	style="background-color: #babbba;">
																	<div id="label-tag" class="p-2"
																		style="display: none;">
																		<p style="text-align: center;margin-top: 0.5rem;"
																			class="fw-bold fs-5">Add batches</p>
																		<div class="row">
																			<div class="col-md-6">
																				<label class="form-label">MRP</label>
																				<input type="text"
																					class="form-control group-input"
																					id="mrp" inputmode="numeric"
																					oninput="this.value = this.value.replace(/[^0-9.]/g, '')">
																			</div>
																			<div class="col-md-6">
																				<label class="form-label">Discount
																					Price</label>
																				<input type="number" inputmode="numeric"
																					oninput="this.value = this.value.replace(/[^0-9.]/g, '')"
																					class="form-control group-input"
																					id="discount-price">
																			</div>
																			<div class="col-md-6">
																				<label class="form-label">Label
																					Name</label>
																				<select id="label-name-select"
																					class="form-control"
																					style="display: block;">
																					<option value="" disabled selected>
																						Select Label Name</option>
																				</select>
																			</div>
																			<div class="col-md-6">
																				<label class="form-label">Batch Quantity</label>
																				<select id="batch-quantity-select" class="form-control" style="display: block;" disabled>
																					<option value="" disabled selected>Select Batch Quantity</option>
																				</select>
																			</div>
																			
																			<input style="display: none;" type="text" id="batch-quantity-input" readonly />
																			
																		</div>
																		<div class="col-lg-12 col-md-12 col-sm-12 mt-3">
																			<p class="add-batch-button fw-bold" style="border: 1px solid black; width: 100%; cursor: pointer; display: none;
																	  padding: 5px 12px;background-color: #212529;color: white;text-align: center;border-radius: 6px;"
																				id="product_batch" name="product_batch">
																				Add batch
																			</p>
																		</div>
																		<div class="tags-input-wrapper"
																			id="grouped-input-wrapper"
																			style="margin-top: 0.5rem;overflow-x: auto;">
																			<table id="batch-table"
																				class="table table-bordered">
																				<thead>
																					<tr>
																						<th>MRP</th>
																						<th>Discount Price</th>
																						<th>Label Name</th>
																						<th>Batch Quantity</th>
																						<th>Update</th>
																						<th>Remove</th>
																					</tr>
																				</thead>
																				<tbody id="batch-table-body">
																				</tbody>
																			</table>
																		</div>
																	</div>
																</div> -->
																<!-- 
																<div class="col-lg-6 col-md-12 col-sm-12">
																	<label for="product-instock"
																		class="form-label in-stock">In stock</label>
																	<input type="number" class="form-control"
																		id="product-instock" name="in_stock" required
																		min="0" inputmode="numeric" required
																		oninput="this.value = this.value.replace(/[^0-9.]/g, '')">
																</div> -->
																<!-- <div class="col-lg-6 col-md-12 col-sm-12">
																	<div id="mrp_price_id" style="display: none;">
																		<label for="mrp_price"
																			class="form-label">MRP</label>
																		<input id="mrp_price" type="number"
																			class="form-control" name="mrp_price"
																			min="0" inputmode="numeric"
																			oninput="this.value = this.value.replace(/[^0-9]/g, '')">
																	</div>
																</div> -->
																<!-- <div class="col-lg-6 col-md-12 col-sm-12">
																	<div id="product-price_id" style="display: none;">
																		<label for="product_price"
																			class="form-label">Discount price</label>
																		<input id="product-price" type="number"
																			class="form-control" name="product_price"
																			min="0" inputmode="numeric"
																			oninput="this.value = this.value.replace(/[^0-9]/g, '')">
																	</div>
																</div> -->
																<div class="col-lg-12 col-md-12 col-sm-12"
																	id="prod-instock" style="display: none;">
																	<label for="product-instock"
																		class="form-label in-stock">In stock</label>
																	<input type="number" class="form-control"
																		id="product-instock" name="in_stock" min="0"
																		inputmode="numeric"
																		oninput="this.value = this.value.replace(/[^0-9.]/g, '')">
																</div>
																<!-- <div class="col-lg-12 col-md-12 col-sm-12" id="manage-stock" style="display: none;">
																	<div id="transaction-type-container">
																		<label>
																			<input type="radio" id="credit"
																				name="operation" style="width: 15%;"
																				value="credit"
																				onchange="handleOperationChange()">
																			Credit
																		</label>
																		<label>
																			<input type="radio" id="debit"
																				name="operation" style="width: 15%;"
																				value="debit"
																				onchange="handleOperationChange()">
																			Debit
																		</label>
																	</div>
																</div>
																<div class="col-lg-6 col-md-12 col-sm-12" id="amount-input-container" style="display: none;">
																	<label for="transaction-amount">Change Quantity:</label>
																	<input type="number" id="amount" class="form-control" placeholder="Enter quantity" name="amount" min="0" step="0.01">
																</div> -->

																<div class="col-lg-12 col-md-12 col-sm-12">
																	<button type="submit"
																		class="btn btn-dark w-100 fw-bold product-add"
																		id="product-add">Add Product</button>
																</div>
															</div>
														</form>
													</div>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>

						<table id="productTable">

							<thead>
								<tr>
									<th>Sr No</th>
									<th>Product Name</th>
									<th>Product Image</th>
									<th>Product Description</th>

									<th>Inserted Date</th>
									<th>Add batch</th>
									<th>Update</th>
									<th>Delete</th>
								</tr>
							</thead>
							<tbody>
							</tbody>

						</table>
						<div id="pagination" style="margin-top: 20px;"></div>
					</div>
				</div>

			</main>
			<div class="overlay"></div>
			<div class="modal fade" style="width: 100%;z-index: 10000;" id="BatchModel" tabindex="-1"
				aria-labelledby="exampleModalLabel" aria-hidden="true">
				<div class="modal-dialog  modal-lg">
					<div class="modal-content" style="width: 100%;">
						<div class="modal-header">
							<h1 class="modal-title fs-5 batch-add-header" id="exampleModalLabel">Add Batch</h1>
							<button type="button" onclick="closeBatch()" class="btn-close batch-closes"
								data-bs-dismiss="modal" aria-label="Close"></button>
						</div>
						<div class="modal-body">
							<div class="container my-5">
								<div class="row justify-content-center">
									<div class="col-lg-12">
										<form id="product-type-form">
											<div class="row g-3">
												<div class="col-lg-12 col-md-12 col-sm-12 loose_products">
													<div id="label-tag" class="p-2">
														<p style="text-align: center;margin-top: 0.5rem;"
															class="fw-bold fs-5 batch-add-subheader">Add batches</p>
														<div class="row">
															<div class="col-md-6">
																<label class="form-label">MRP</label>
																<input type="text" placeholder="Enter MRP"
																	class="form-control group-input" id="mrp"
																	inputmode="numeric" name="mrp">
															</div>
															<div class="col-md-6">
																<label class="form-label">Discount Price</label>
																<input type="number" placeholder="Enter discount price"
																	class="form-control group-input" id="discount-price"
																	inputmode="numeric" name="discount_price">
															</div>
															<div class="col-md-6">
																<label class="form-label">Label Name</label>
																<input type="text" id="label-name-input"
																	class="form-control" placeholder="Enter Label Name"
																	name="label_name">

															</div>
															<div class="col-md-6">
																<label class="form-label">Batch Quantity</label>
																<input type="text" id="batch-quantity-input"
																	class="form-control"
																	placeholder="Enter Batch Quantity"
																	name="batch_quantity">

															</div>
															<div class="col-md-6">
																<label class="form-label">Select Flavour</label>
																<select name="flavour_id" id="flavour_id"></select>
															</div>
															<!-- <div class="col-md-6">
															<label class="form-label">Batch Images</label>
															<input type="file" multiple name="batch_image" class="form-control" id="batch_image">
															<div id="image-preview-container" style="margin-top: 10px; display: flex; gap: 10px; flex-wrap: wrap;"></div>
														</div> -->
															<div class="col-md-6 pieces-stock" style="display: none;">
																<label class="form-label">In Stock</label>
																<input type="text" id="batch-instock"
																	class="form-control"
																	placeholder="Enter available stock" name="in_stock">

															</div>
															<div class="col-lg-12 col-md-12 col-sm-12 mt-3">
																<button type="submit" class="add-batch-button fw-bold"
																	style="border: 1px solid black; width: 100%; cursor: pointer; 
															  padding: 5px 12px;background-color: #212529;color: white;text-align: center;border-radius: 6px;"
																	id="product_batch">
																	Add Batch
																</button>
															</div>
														</div>
														<div style="margin-top: 0.5rem;overflow-x: auto;">
															<table id="batch-table-head" class="table table-bordered">
																<thead>
																	<tr>
																		<th>MRP</th>
																		<th>Discount Price</th>
																		<th>Label Name</th>
																		<th>Batch Quantity</th>
																		<th>Update</th>
																		<th>Remove</th>
																	</tr>
																</thead>
																<tbody id="batch-table-body">
																</tbody>
															</table>
															<table id="batch-table-pieces-head"
																class="table table-bordered">
																<thead>
																	<tr>
																		<th>MRP</th>
																		<th>Discount Price</th>
																		<th>Label Name</th>
																		<th>Batch Quantity</th>
																		<th>In Stock</th>
																		<th>Update</th>
																		<th>Remove</th>
																	</tr>
																</thead>
																<tbody id="batch-table-pieces-body">
																</tbody>
															</table>
														</div>
													</div>
												</div>
											</div>
										</form>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</section>
		<%-include("../javascriptss/productjs.ejs")%>
</body>

</html>